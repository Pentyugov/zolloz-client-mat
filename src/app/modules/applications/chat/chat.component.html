<!--<div fxLayout="row" fxLayoutAlign="center start">-->
<!--  <div fxFlex.gt-md="100" fxFlex.gt-sm="100" fxFlex="100">-->
    <mat-card>

      <mat-toolbar class="bg-success no-shadow chat-right-panel" color="warn">
        <div fxLayout="row" fxFlex="100" fxLayoutAlign="center center">
          <button (click)="chatnav.toggle()" mat-icon-button>
            <mat-icon>menu</mat-icon>
          </button>
          <span class="top-avatar m-r-10">
              <img src="{{ recipient.profileImage }}" class="img-circle" />
            </span>
          <div fxFlex>
            <div class="font-14">{{ getUserName(recipient) }}</div>
          </div>
          <button [matMenuTriggerFor]="them" mat-icon-button class="ml-1">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #them="matMenu" x-position="before">
            <button mat-menu-item>Contact info</button>
            <button mat-menu-item>Mute</button>
            <button mat-menu-item>Delete chat</button>
          </mat-menu>
        </div>
      </mat-toolbar>

      <mat-sidenav-container
        class="side-chat-box"
        [ngClass]="{ 'side-panel-opened': sidePanelOpened, 'side-panel-closed': !sidePanelOpened }"
      >

        <mat-sidenav
          #chatnav
          [mode]="isOver() ? 'over' : 'side'"
          [opened]="!isOver()"
          (open)="sidePanelOpened = true"
          (close)="sidePanelOpened = false"
          [perfectScrollbar]="config"
          [disabled]="isOver()"
          class="email-sidebar"
        >
          <mat-nav-list>
            <div *ngFor="let user of users">
              <mat-list-item
                *ngIf="currentUser.id !== user.id"
                (click)="changeChatRoom(user)"
                [ngClass]="{'selected-dark' : isDarkMode && user.id === recipient.id, 'selected-light' : !isDarkMode && user.id === recipient.id}"
              >
                <img mat-list-avatar src="{{ user.profileImage }}" alt="" />
                <h3 matLine>{{ getUserName(user) }}</h3>
<!--                <p matLine class="text-muted">{{ getLastMessage(user) }}</p>-->
              </mat-list-item>
            </div>
          </mat-nav-list>

        </mat-sidenav>


        <perfect-scrollbar style="max-width: 100%; max-height: 600px" [config]="config">
          <mat-card-content class="chat-middle-box" style="min-height: 600px">

            <ng-container *ngFor="let c of messages">

              <ng-template [ngIf]="recipient.id !== c.recipientId" [ngIfElse]="evenblock">
                <div class="chat-list odd">
                  <div>
                    <div class="chat-block" style="">
                      <img src="{{ recipient.profileImage }}" class="img-circle" width="40"/>{{ c.content}}</div>
                    <span class="chat-date">{{ c.createDate | date }}</span>
                  </div>
                </div>

              </ng-template>

              <ng-template #evenblock>
                <div class="chat-list even">
                  <div class="chat-message">
                    <div class="chat-block bg-light-info">{{ c.content }}</div>
                    <span class="chat-date">{{ c.createDate | date }}</span>
                  </div>
                </div>
              </ng-template>

            </ng-container>
          </mat-card-content>
        </perfect-scrollbar>


        <mat-card-actions class="chat-footer">
          <div fxLayout="row" layout-align="start center">
            <mat-form-field class="mr-1 ml-1" fxFlex>
              <input
                matInput
                [(ngModel)]="chatMessageToSend.content"
                placeholder="Send message"
                #myInput
                (keyup.enter)="OnAddMsg()"
              />
            </mat-form-field>
            <button mat-fab color="warn" (click)="sendMessage()">
              <mat-icon>send</mat-icon>
            </button>
          </div>
        </mat-card-actions>
      </mat-sidenav-container>
    </mat-card>
<!--  </div>-->
<!--</div>-->
